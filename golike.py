
#TOOL By TriDev
#tele: @tranminhtri
enc = "aW1wb3J0IG9zDQppbXBvcnQgc3lzLHJlDQppbXBvcnQgZGF0ZXRpbWUNCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lLCB0aW1lZGVsdGENCmltcG9ydCBqc29uDQppbXBvcnQgcmFuZG9tDQppbXBvcnQgcGxhdGZvcm0NCnRyeToNCiAgaW1wb3J0IHJlcXVlc3RzDQpleGNlcHQgSW1wb3J0RXJyb3I6DQogIG9zLnN5c3RlbSgncGlwIGluc3RhbGwgcmVxdWVzdHMnKQ0KICBpbXBvcnQgcmVxdWVzdHMNCnRyeToNCiAgZnJvbSBjb2xvcmFtYSBpbXBvcnQgQmFjaywgRm9yZSwgRm9yZSwgU3R5bGUsIGluaXQNCmV4Y2VwdCBJbXBvcnRFcnJvcjoNCiAgb3Muc3lzdGVtKCdwaXAgaW5zdGFsbCBjb2xvcmFtYScpDQogIGZyb20gY29sb3JhbWEgaW1wb3J0IEJhY2ssIEZvcmUsIEZvcmUsIFN0eWxlLCBpbml0DQp0cnk6DQogIGZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwDQpleGNlcHQgSW1wb3J0RXJyb3I6DQogIG9zLnN5c3RlbSgncGlwMyBpbnN0YWxsIGJlYXV0aWZ1bHNvdXA0JykNCiAgZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXANCg0KDQoNCg0KDQppbXBvcnQgdGltZQ0KZnJvbSB0aW1lIGltcG9ydCBzbGVlcA0KaW1wb3J0IGpzb24sYXN0DQpvcy5zeXN0ZW0oJ2NsZWFyJykNCg0KaW5pdChhdXRvcmVzZXQ9VHJ1ZSkNCg0KDQoNCmRlZiBwcjModGV4dCk6DQogIGxpbmVzID0gdGV4dC5zcGxpdCgnXG4nKQ0KICBmb3IgbGluZSBpbiBsaW5lczoNCiAgICAgIHN5cy5zdGRvdXQud3JpdGUobGluZSsnXG4nKQ0KICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpDQogICAgICBzbGVlcCgwLjEpDQpkZWYgcHIodGV4dCk6DQogIGZvciBpIGluIHJhbmdlKGxlbih0ZXh0KSsxKToNCiAgICAgIHN5cy5zdGRvdXQud3JpdGUoIlxyIiArIHRleHRbOmldKQ0KICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpDQogICAgICBzbGVlcCgwLjAxKQ0KICBwcmludCgpDQoNCmRlZiB0aW1lKCk6DQogIGN1cnJlbnRfdGltZSA9IGRhdGV0aW1lLm5vdygpDQoNCiAgdGltZSA9IGN1cnJlbnRfdGltZS5zdHJmdGltZSgiJU06JVMiKQ0KICByZXR1cm4gdGltZQ0KDQpkZWYgY2ludChudW1iZXIpOg0KICB3aGlsZSBUcnVlOg0KICAgIHRyeToNCiAgICAgIG51bWJlcnMgPSBpbnQoaW5wdXQobnVtYmVyKSkNCiAgICAgIHJldHVybiBudW1iZXJzDQogICAgZXhjZXB0IFZhbHVlRXJyb3I6DQogICAgICBwcmludChmJ3tyZWR9VnVpIGzDsm5nIGNo4buJIG5o4bqtcCBz4buRJykNCg0KDQoNCg0KDQoNCmRlZiBjaGFuZ2V0b2tlbihyZWQsZ3JlZW4sd2hpdGUpOg0KICBpZiBvcy5wYXRoLmV4aXN0cygiY2FjaGVfZ29saWtlX2F1dGgudHh0Iik6DQogICAgdGV4dD1mJycne2dyZWVufULhuqBOIE1V4buQTiBEw5lORyBBVVRIIEPFqCBIQVkgxJDhu5RJIEFVVEgNCntyZWR9W3t3aGl0ZX0xe3JlZH1dIMSQ4buUSSBBVVRIDQp7cmVkfVt7d2hpdGV9MntyZWR9XSBEw5lORyBBVVRIIEPFqCcnJw0KICAgIHByMyh0ZXh0KQ0KICAgIGNoYW5nZXRva2VuPWNpbnQoZid7cmVkfU5I4bqsUCBM4buwQSBDSOG7jE46IHtncmVlbn0nKQ0KICAgIHByaW50KCfilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEnKQ0KICAgIGlmIGNoYW5nZXRva2VuPT0xOg0KICAgICAgZmlsZV9uYW1lID0gJ2NhY2hlX2dvbGlrZV9hdXRoLnR4dCcNCiAgICAgIGlmIG9zLnBhdGguZXhpc3RzKGZpbGVfbmFtZSk6DQogICAgICAgICAgb3MucmVtb3ZlKGZpbGVfbmFtZSkNCiAgICBlbHNlOg0KICAgICAgcGFzcw0KDQoNCg0KDQoNCg0KDQoNCmRlZiBiYW5uZXIocmVkLGdyZWVuLGJsdWUseWVsbG93LGN5YW4scGluayk6DQogIHRleHQ9ZicnJyAgICB7Rm9yZS5MSUdIVFdISVRFX0VYfQ0KDQpcMDMzWzE7MzRtICAgICAgICAgICAgICAgICAg4paI4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKVlyAgICAgIOKWiOKWiOKWiOKWiOKWiOKWiOKVlyDilojilojilojilojilojilojilojilZfilojilojilZcgICDilojilojilZcgICAgICAgICAgICANClwwMzNbMTszOW0gICAgICAgICAgICAgICAgICDilZrilZDilZDilojilojilZTilZDilZDilZ3ilojilojilZTilZDilZDilojilojilZfilojilojilZEgICAgICDilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilZDilZDilZ3ilojilojilZEgICDilojilojilZEgICAgICAgICAgICAgDQpcMDMzWzE7MzRtICAgICAgICAgICAgICAgICAgICAg4paI4paI4pWRICAg4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4pWR4paI4paI4paI4paI4paI4pWX4paI4paI4pWRICDilojilojilZHilojilojilojilojilojilZcgIOKWiOKWiOKVkSAgIOKWiOKWiOKVkSAgICAgICAgICAgICANClwwMzNbMTszOW0gICAgICAgICAgICAgICAgICAgICDilojilojilZEgICDilojilojilZTilZDilZDilojilojilZfilojilojilZHilZrilZDilZDilZDilZDilZ3ilojilojilZEgIOKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKVnSAg4pWa4paI4paI4pWXIOKWiOKWiOKVlOKVnSAgICAgICAgICAgICANClwwMzNbMTszNG0gICAgICAgICAgICAgICAgICAgICDilojilojilZEgICDilojilojilZEgIOKWiOKWiOKVkeKWiOKWiOKVkSAgICAgIOKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVneKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVlyDilZrilojilojilojilojilZTilZ0gICAgICAgICAgICAgIA0KXDAzM1sxOzM5bSAgICAgICAgICAgICAgICAgICAgIOKVmuKVkOKVnSAgIOKVmuKVkOKVnSAg4pWa4pWQ4pWd4pWa4pWQ4pWdICAgICAg4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWdIOKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVnSAg4pWa4pWQ4pWQ4pWQ4pWdIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Ymx1ZX1UcsOtIGJlc3QgR29saWtlIHRvb2wNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3lhbn3ilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eWVsbG93feKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgQ0KICAgICAgICAgICAgICAgICAgIHtyZWR9Q09ERVI6e2dyZWVufVRSSSBERVYgICAgICAgICAgICAgIHtyZWR9VEVMRUdSQU06e2dyZWVufXQubWUvdHJhbm1pbmh0cmkNCiAgICAgICAgICAgICAgICAgIHtyZWR9IEZBQ0VCT09LOntncmVlbn1UcuG6p24gTWluaCBUcsOtICAgICB7cmVkfU5hbWU6e2dyZWVufW10cmlkeg0Ke3JlZH0gICAgICAgICAgICAgICAgICAgICAgICAgICAg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQDQp7cmVkfSAgICAgICAgICAgICAgICAgICAgICAgICAgICDilZEge2dyZWVufSAgIEdPTElLRSAtIFRJS1RPSyAge3JlZH0gIOKVkQ0Ke3JlZH0gICAgICAgICAgICAgICAgICAgICAgICAgICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYDQoNCiDigLzvuI8gIHtyZWR9TeG7jEkgTkfGr+G7nEkge2N5YW59Q0jDmiDDnSDigLzvuI8NCiAgDQp+Wytde2dyZWVufVRJ4buATiBTQVUgS0hJIEzDgE0gTlbhu6QgU+G6vCDEkMav4buiQyBD4buYTkcgU0FVIFbDgEkgUEjDmlQNCn5bK117Ymx1ZX1LSeG7gk0gVFJBIEtIw5RORyBUSOG6pFkgTMOKTiBYVSBUSMOMIFZVSSBMw5JORyBDSEVDSyBM4bqgSSBBQ0MgDQp+Wytde3Bpbmt9TcOAIERPIEjhu4YgVEjhu5BORyBHT0xJS0UgQ0jGr0EgTE9BRCEhIQ0KflsrXXtjeWFufWh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS90cmlkZXB0cmFpc3NvMT9taWJleHRpZD1aYldLd0wNCn5bK117eWVsbG93fUNIw5pDIE3hu4xJIE5Hxq/hu5xJIFPhu6wgROG7pE5HIFZVSSBW4bq68J+RjSANCntibHVlfeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgScnJw0KDQogIHByMyh0ZXh0KQ0KICB0ZXh0PWYnJyd7cmVkfSBsICAgICAgICAgICDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJANCntyZWR9ICAgICAgICAgICAg4pWRIHtncmVlbn0gICBHT0xJS0UgLSBUSUtUT0sgIHtyZWR9ICDilZENCntyZWR9ICAgICAgICAgICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYDQonIuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSciDQp7cmVkfU3hu4xJIE5Hxq/hu5xJIHtjeWFufUNIw5ogw50hISEhDQogflsrXXtncmVlbn1USeG7gE4gU0FVIEtISSBMw4BNIE5W4bukIFPhurwgxJDGr+G7okMgQ+G7mE5HIFNBVSBWw4BJIFBIw5pUDQogflsrXXtibHVlfUtJ4buCTSBUUkEgS0jDlE5HIFRI4bqkWSBMw4pOIFhVIFRIw4wgVlVJIEzDkk5HIENIRUNLIEzhuqBJIEFDQyANCiB+Wytde3Bpbmt9TcOAIERPIEjhu4YgVEjhu5BORyBHT0xJS0UgQ0jGr0EgTE9BRCEhIQ0KIH5bK117Y3lhbn1odHRwczovL3d3dy5mYWNlYm9vay5jb20vdHJpZGVwdHJhaXNzbzE/bWliZXh0aWQ9WmJXS3dMDQogflsrXXt5ZWxsb3d9Q0jDmkMgTeG7jEkgTkfGr+G7nEkgU+G7rCBE4bukTkcgVlVJIFbhurrwn5GNDQonIuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgScnJw0KDQoNCg0KDQoNCg0KZGVmIGNoZWNrYXV0aChyZWQsYmx1ZSxncmVlbix5ZWxsb3csY3lhbixtYWdlbnRhLG9yYW5nZSx4YW5obmhhdCx4ZHVvbmcscGluayk6DQogd2hpbGUgVHJ1ZSA6DQogIHdoaWxlIFRydWUgOg0KICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cygiY2FjaGVfZ29saWtlX2F1dGgudHh0Iik6DQogICAgICBhdXRoPXN0cihpbnB1dChmJ35bK117cmVkfU5I4bqsUCBBVVRIOntncmVlbn0gJykpDQogICAgICBoZWFkZXJzID17DQogICAgJ0F1dGhvcml6YXRpb24nICAgICA6YXV0aCwNCiAgICAndCc6ICAgICAgICAnVkZaU1drNVZPVVZWVkVKUVVrWkdORlJYWXpsUVVUMDknLA0KICAgICdVc2VyLUFnZW50JzoiTW96aWxsYS81LjAgKGlQaG9uZTsgVTsgQ1BVIGlQaG9uZSBPUyA0XzNfNSBsaWtlIE1hYyBPUyBYOyBlbi11cykgQXBwbGVXZWJLaXQvNTMzLjE3LjkgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzUuMC4yIE1vYmlsZS84TDEgU2FmYXJpLzY1MzMuMTguNSINCiB9DQogICAgICBjaGVjaz1qc29uLmxvYWRzKHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9nYXRld2F5LmdvbGlrZS5uZXQvYXBpL3Rpa3Rvay1hY2NvdW50JyxoZWFkZXJzPWhlYWRlcnMpLnRleHQpDQogICAgICBpZiBjaGVja1snc3RhdHVzJ109PTIwMDoNCiAgICAgICAgbmFtZT1jaGVja1snZGF0YSddWzBdWyd1c2VybmFtZSddDQogICAgICAgIGhlYT17DQonQXV0aG9yaXphdGlvbic6YXV0aCwNCid0JzogICAgJ1ZGWlNXazVWT1VWVlZFSlFVa1pHTkZSWFl6bFFVVDA5JywNCidVc2VyLUFnZW50JzoiTW96aWxsYS81LjAgKGlQaG9uZTsgVTsgQ1BVIGlQaG9uZSBPUyA0XzNfNSBsaWtlIE1hYyBPUyBYOyBlbi11cykgQXBwbGVXZWJLaXQvNTMzLjE3LjkgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzUuMC4yIE1vYmlsZS84TDEgU2FmYXJpLzY1MzMuMTguNSINCn0NCiMgQ2h14buXaSBKU09OIMSR4bqndSB2w6BvDQogICAgICAgIGRhdGE9cmVxdWVzdHMuZ2V0KCdodHRwczovL2dhdGV3YXkuZ29saWtlLm5ldC9hcGkvc3RhdGlzdGljcy9yZXBvcnQnLGhlYWRlcnM9aGVhKS50ZXh0DQogICAgICAgIHRyeToNCiAgICAgICAgICBkYXRhPWpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgZXhjZXB0IDoNCiAgICAgICAgICBicmVhaw0KICAgICAgICAjIFTDrW5oIHThu5VuZyBwZW5kaW5nIGNvaW4NCiAgICAgICAgdG90YWxfcGVuZGluZ19jb2luID0gMA0KICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBkYXRhLml0ZW1zKCk6DQogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCBkaWN0KSBhbmQgJ3BlbmRpbmdfY29pbicgaW4gdmFsdWU6DQogICAgICAgICAgICAgICAgdG90YWxfcGVuZGluZ19jb2luICs9IHZhbHVlWydwZW5kaW5nX2NvaW4nXQ0KICAgICAgICB4aHQ9ZGF0YVsnY3VycmVudF9jb2luJ10NCiAgICAgICAgdGV4dD1mJ35bK117cmVkfVNVQ0NFU1MnDQogICAgICAgIHRleHQ9Zid7cmVkfVTDik4gVMOASSBLSE/huqJOOiB7Z3JlZW59IHtuYW1lfScNCiAgICAgICAgcHIodGV4dCkNCiAgICAgICAgdGV4dD1mJ3tncmVlbn0ke3JlZH0gSEnhu4ZOIFThuqBJIDp7Z3JlZW59e3hodH3EkScNCiAgICAgICAgcHIodGV4dCkNCiAgICAgICAgIyBJbiB04buVbmcgcGVuZGluZyBjb2luDQogICAgICAgIHRleHQ9Zid7Z3JlZW59JHtyZWR9IENI4bucIERVWeG7hlQ6e2dyZWVufXt0b3RhbF9wZW5kaW5nX2NvaW59xJEnDQogICAgICAgIHByKHRleHQpDQogICAgICAgIHByaW50KCfilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEnKQ0KICAgICAgICB0ZXh0PWYnflsrXXtyZWR9U0VMRUNUIHtncmVlbn1BQ0MgQ0jhuqBZIE5ISeG7hk0gVuG7pCAnDQogICAgICAgIHByKHRleHQpDQogICAgICAgIG5pY2tuYW1lcyA9IFtpdGVtWyduaWNrbmFtZSddIGZvciBpdGVtIGluIGNoZWNrWydkYXRhJ10gaWYgJ25pY2tuYW1lJyBpbiBpdGVtXQ0KICAgICAgICBmb3IgaSwgbmlja25hbWUgaW4gZW51bWVyYXRlKG5pY2tuYW1lcywgc3RhcnQ9MSk6DQogICAgICAgICAgICBnbG9iYWxzKClbZid7aX0nXSA9IG5pY2tuYW1lDQogICAgICAgICMgSW4gZ2nDoSB0cuG7iyBj4bunYSBjw6FjIGJp4bq/bg0KICAgICAgICBmb3IgaSwgbmlja25hbWUgaW4gZW51bWVyYXRlKG5pY2tuYW1lcywgc3RhcnQ9MSk6DQogICAgICAgICAgICB0ZXh0PWYne3JlZH1be2dyZWVufXtpfXtyZWR9XToge2dsb2JhbHMoKVtmIntpfSJdfScNCiAgICAgICAgICAgIHByKHRleHQpDQogICAgICAgIHdpdGggb3BlbigiY2FjaGVfZ29saWtlX2F1dGgudHh0IiwgInciKSBhcyBzdGF0ZV9maWxlOg0KICAgICAgICAgIHN0YXRlX2ZpbGUud3JpdGUoYXV0aCkNCiAgICAgICAgcmV0dXJuIGF1dGgsY2hlY2sNCiAgICAgIGVsc2U6DQogICAgICAgIHRleHQ9Zid+Wytde3JlZH1GQUlMIEFVVEggS0jDlE5HIENIw41OSCBYw4FDPj57Z3JlZW59VlVJIEzDkk5HIE5I4bqsUCBM4bqgSScNCiAgICAgICAgY29udGludWUNCiAgICBlbHNlOg0KICAgICB3aXRoIG9wZW4oJ2NhY2hlX2dvbGlrZV9hdXRoLnR4dCcpIGFzIGY6DQogICAgICAgIGxpbmVzID0gZi5yZWFkbGluZXMoKQ0KICAgICAgICBhdXRoPWxpbmVzWzBdDQogICAgICAgIGhlYWRlcnMgPXsNCiAgICAgICdBdXRob3JpemF0aW9uJyAgIDphdXRoLA0KICAgICAgJ3QnOiAgICAgICdWRlpTV2s1Vk9VVlZWRUpRVWtaR05GUlhZemxRVVQwOScsDQogICAgICAnVXNlci1BZ2VudCc6Ik1vemlsbGEvNS4wIChpUGhvbmU7IFU7IENQVSBpUGhvbmUgT1MgNF8zXzUgbGlrZSBNYWMgT1MgWDsgZW4tdXMpIEFwcGxlV2ViS2l0LzUzMy4xNy45IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi81LjAuMiBNb2JpbGUvOEwxIFNhZmFyaS82NTMzLjE4LjUiDQogICAgICB9DQogICAgICAgIGNoZWNrPWpzb24ubG9hZHMocmVxdWVzdHMuZ2V0KCdodHRwczovL2dhdGV3YXkuZ29saWtlLm5ldC9hcGkvdGlrdG9rLWFjY291bnQnLGhlYWRlcnM9aGVhZGVycykudGV4dCkNCiAgICAgICAgaWYgY2hlY2tbJ3N0YXR1cyddPT0yMDA6DQogICAgICAgICAgbmFtZSA9Y2hlY2tbJ2RhdGEnXVswXVsndXNlcm5hbWUnXQ0KICAgICAgICAgIGhlYT17DQogICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOmF1dGgsDQogICAgICAgICAgICAgICAgJ3QnOiAgICAnVkZaU1drNVZPVVZWVkVKUVVrWkdORlJYWXpsUVVUMDknLA0KICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzoiTW96aWxsYS81LjAgKGlQaG9uZTsgVTsgQ1BVIGlQaG9uZSBPUyA0XzNfNSBsaWtlIE1hYyBPUyBYOyBlbi11cykgQXBwbGVXZWJLaXQvNTMzLjE3LjkgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzUuMC4yIE1vYmlsZS84TDEgU2FmYXJpLzY1MzMuMTguNSINCiAgICAgICAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgZGF0YT1yZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ2F0ZXdheS5nb2xpa2UubmV0L2FwaS9zdGF0aXN0aWNzL3JlcG9ydCcsaGVhZGVycz1oZWEpLnRleHQNCiAgICAgICAgICB0cnk6DQogICAgICAgICAgICBkYXRhPWpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICBleGNlcHQgOg0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAjIFTDrW5oIHThu5VuZyBwZW5kaW5nIGNvaW4NCiAgICAgICAgICB0b3RhbF9wZW5kaW5nX2NvaW4gPSAwDQogICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gZGF0YS5pdGVtcygpOg0KICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCBkaWN0KSBhbmQgJ3BlbmRpbmdfY29pbicgaW4gdmFsdWU6DQogICAgICAgICAgICAgICAgICB0b3RhbF9wZW5kaW5nX2NvaW4gKz0gdmFsdWVbJ3BlbmRpbmdfY29pbiddDQogICAgICAgICAgeGh0PWRhdGFbJ2N1cnJlbnRfY29pbiddDQogICAgICAgICAgdGV4dD1mJ3tyZWR9VMOKTiBUw4BJIEtIT+G6ok46IHtncmVlbn0ge25hbWV9Jw0KICAgICAgICAgIHByKHRleHQpDQogICAgICAgICAgdGV4dD1mJ3tncmVlbn0ke3JlZH0gSEnhu4ZOIFThuqBJIDp7Z3JlZW59e3hodH3EkScNCiAgICAgICAgICBwcih0ZXh0KQ0KICAgICAgICAgICMgSW4gdOG7lW5nIHBlbmRpbmcgY29pbg0KICAgICAgICAgIHRleHQ9Zid7Z3JlZW59JHtyZWR9IENI4bucIERVWeG7hlQ6e2dyZWVufXt0b3RhbF9wZW5kaW5nX2NvaW59xJEnDQogICAgICAgICAgcHIodGV4dCkNCiAgICAgICAgICBuaWNrbmFtZXMgPSBbaXRlbVsnbmlja25hbWUnXSBmb3IgaXRlbSBpbiBjaGVja1snZGF0YSddIGlmICduaWNrbmFtZScgaW4gaXRlbV0NCiAgICAgICAgICBmb3IgaSwgbmlja25hbWUgaW4gZW51bWVyYXRlKG5pY2tuYW1lcywgc3RhcnQ9MSk6DQogICAgICAgICAgICAgIGdsb2JhbHMoKVtmJ3tpfSddID0gbmlja25hbWUNCiAgICAgICAgICBwcmludCgn4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBJykNCiAgICAgICAgICB0ZXh0PWYnflsrXXtyZWR9U0VMRUNUIHtncmVlbn1BQ0MgQ0jhuqBZIE5ISeG7hk0gVuG7pCAnDQogICAgICAgICAgcHIodGV4dCkNCiAgICAgICAgICAjIEluIGdpw6EgdHLhu4sgY+G7p2EgY8OhYyBiaeG6v24NCiAgICAgICAgICBmb3IgaSwgbmlja25hbWUgaW4gZW51bWVyYXRlKG5pY2tuYW1lcywgc3RhcnQ9MSk6DQogICAgICAgICAgICAgIHRleHQ9Zid7cmVkfVt7Z3JlZW59e2l9e3JlZH1dOiB7Z2xvYmFscygpW2Yie2l9Il19Jw0KICAgICAgICAgICAgICBwcih0ZXh0KQ0KDQogICAgICAgIHJldHVybiBhdXRoLCBjaGVjaw0KDQoNCg0KDQpkZWYgZ2V0X2lkX2Zyb21fbmlja25hbWVfbnVtYmVyKHJhbm1hdSxjaGVjayxyZWQsYmx1ZSxncmVlbix5ZWxsb3csY3lhbixtYWdlbnRhLG9yYW5nZSx4YW5obmhhdCx4ZHVvbmcscGluayk6DQogIHdoaWxlIFRydWUgOg0KDQogICAgdXNlcl9pbnB1dD1pbnB1dChmJ35bK117cmFuZG9tLmNob2ljZShyYW5tYXUpfT57cmFuZG9tLmNob2ljZShyYW5tYXUpfT57cmFuZG9tLmNob2ljZShyYW5tYXUpfT4ge2dyZWVufUNI4buMTiBBQ0MgVElLVE9LIE1V4buQTiBDSOG6oFkgSk9COntncmVlbn0gJykNCiAgICB0cnk6DQogICAgICBuID0gaW50KHVzZXJfaW5wdXQpDQogICAgICBpZiAnZGF0YScgaW4gY2hlY2sgYW5kIGxlbihjaGVja1snZGF0YSddKSA+PSBuOg0KICAgICAgICAgIGlkdGlrdG9rID0gY2hlY2tbJ2RhdGEnXVtuLTFdWydpZCddDQogICAgICAgICAgaWYgaWR0aWt0b2sgOg0KICAgICAgICAgICAgICB0ZXh0PWYie3JlZH1JRCBD4bumQSBOSUNLTkFNRSBT4buQIHtufSBMw4A6IHtncmVlbn17aWR0aWt0b2t9Ig0KICAgICAgICAgICAgICBwcih0ZXh0KQ0KICAgICAgICAgICAgICBwcmludCgn4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBJykNCiAgICAgICAgICAgICAgcmV0dXJuIGlkdGlrdG9rDQogICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgdGV4dD1mIntyZWR9S0jDlE5HIFTDjE0gVEjhuqRZIE5JQ0tOQU1FIFTGr8agTkcg4buoTkcuIg0KICAgICAgICAgICAgICBwcih0ZXh0KQ0KICAgICAgZWxzZToNCiAgICAgICAgICBjb250aW51ZQ0KICAgIGV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgICAgICAgIHByKGYie3JlZH1WVUkgTMOSTkcgQ0jhu4ggTkjhuqxQIFPhu5AuIikNCiAgICAgICAgICBjb250aW51ZQ0KDQoNCg0KDQoNCmRlZiBnZXRqb2IobWF4am9iLGRlbGF5LGF1dGgsaWR0aWt0b2sscmVkLGJsdWUsZ3JlZW4seWVsbG93LGN5YW4sbWFnZW50YSxvcmFuZ2UseGFuaG5oYXQseGR1b25nLHBpbmspOg0KICBzdGFydG1heGpvYj0xDQogIGpvYl9zdWNjZXNzPTANCiAgd2hpbGUgVHJ1ZSA6DQogICAgd2hpbGUgVHJ1ZSA6DQogICAgICBoZWE9ew0KICAgICAgJ0F1dGhvcml6YXRpb24nOiAgYXV0aCwNCiAgICAgJ3QnOiAgICAgICAnVkZaU1drNVZPVVZWVkVKUVVrWkdORlJYWXpsUVVUMDknLA0KICAgICdVc2VyLUFnZW50JzoiTW96aWxsYS81LjAgKGlQaG9uZTsgVTsgQ1BVIGlQaG9uZSBPUyA0XzNfNSBsaWtlIE1hYyBPUyBYOyBlbi11cykgQXBwbGVXZWJLaXQvNTMzLjE3LjkgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzUuMC4yIE1vYmlsZS84TDEgU2FmYXJpLzY1MzMuMTguNSINCn0NCg0KICAgICAgdHJ5Og0KICAgICAgICBhPXJlcXVlc3RzLmdldChmJ2h0dHBzOi8vZ2F0ZXdheS5nb2xpa2UubmV0L2FwaS9hZHZlcnRpc2luZy9wdWJsaXNoZXJzL3Rpa3Rvay9qb2JzP2FjY291bnRfaWQ9e2lkdGlrdG9rfSZkYXRhPW51bGwnLGhlYWRlcnM9aGVhKS5qc29uKCkNCiAgICAgIGV4Y2VwdCA6DQogICAgICAgIGJyZWFrDQogICAgICB0cnk6DQogICAgICAgIGxpbms9YVsnZGF0YSddWydsaW5rJ10NCiAgICAgICAgaWQ9YVsnZGF0YSddWydpZCddDQogICAgICAgIG9iamVjdF9pZD1hWydsb2NrJ11bJ29iamVjdF9pZCddDQogICAgICAgIG9zLnN5c3RlbShmJ3Rlcm11eC1vcGVuLXVybCB7bGlua30nKQ0KICAgICAgZXhjZXB0IDoNCiAgICAgICAgYnJlYWsNCiAgICAgIGZvciBrIGluIHJhbmdlKGRlbGF5LC0xLC0xKToNCiAgICAgICAgbWF1PXJhbmRvbS5jaG9pY2UocmFubWF1KQ0KICAgICAgICBwcmludChmJ3tncmVlbn1KT0IgU1VDQ0VTUzp7cmVkfVt7am9iX3N1Y2Nlc3N9L3tzdGFydG1heGpvYi0xfV17cmFuZG9tLmNob2ljZShyYW5tYXUpfUxPQURJTkcgIHtyYW5kb20uY2hvaWNlKHJhbm1hdSl9Pj4ge3llbGxvd31OVuG7pCBN4buaSSBTQVUge3JhbmRvbS5jaG9pY2UocmFubWF1KX0+PiB7cmFuZG9tLmNob2ljZShyYW5tYXUpfVt7a31zXSAnLGVuZD0nXHInKQ0KICAgICAgICBzbGVlcCgxKQ0KICAgICAgaGVhZGVycyA9IHsNCiAgICAgICAgICAnYXV0aG9yaXphdGlvbic6IGF1dGgsDQogICAgICd0JzogICAgICAgJ1ZGWlNXazVWT1VWVlZFSlFVa1pHTkZSWFl6bFFVVDA5JywNCiAgICAnVXNlci1BZ2VudCc6Ik1vemlsbGEvNS4wIChpUGhvbmU7IFU7IENQVSBpUGhvbmUgT1MgNF8zXzUgbGlrZSBNYWMgT1MgWDsgZW4tdXMpIEFwcGxlV2ViS2l0LzUzMy4xNy45IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi81LjAuMiBNb2JpbGUvOEwxIFNhZmFyaS82NTMzLjE4LjUiDQp9DQoNCiAgICAgIGpzb25fZGF0YSA9IHsNCiAgICAgICAgICAnYWRzX2lkJzogaWQsDQogICAgICAgICAgJ2FjY291bnRfaWQnOiBpZHRpa3RvayAsDQogICAgICAgICAgJ2FzeW5jJzogVHJ1ZSwNCiAgICAgICAgICAnZGF0YSc6IE5vbmUsDQogICAgICB9DQoNCiAgICAgIGcgPSByZXF1ZXN0cy5wb3N0KA0KICAgICAgICAgICdodHRwczovL2dhdGV3YXkuZ29saWtlLm5ldC9hcGkvYWR2ZXJ0aXNpbmcvcHVibGlzaGVycy90aWt0b2svY29tcGxldGUtam9icycsDQogICAgICAgICAgaGVhZGVycz1oZWFkZXJzLA0KICAgICAgICAgIGpzb249anNvbl9kYXRhLA0KICAgICAgKS50ZXh0DQogICAgICB0cnk6DQogICAgICAgIGc9anNvbi5sb2FkcyhnKQ0KICAgICAgZXhjZXB0IDoNCiAgICAgICAgYnJlYWsNCiAgICAgIGlmIGdbJ3N0YXR1cyddPT0yMDA6DQogICAgICAgIGpvYl9zdWNjZXNzKz0xDQogICAgICAgIHByaW50KGYne2dyZWVufUpPQiBTVUNDRVNTOntyZWR9W3tqb2Jfc3VjY2Vzc30ve3N0YXJ0bWF4am9iLTF9XSB7Y3lhbn1be3RpbWUoKX1dIHwge3JhbmRvbS5jaG9pY2UocmFubWF1KX1TVUNDRVNTIHwge2dyZWVufUZPTExPVyB8ICt7Z1siZGF0YSJdWyJwcmljZXMiXX0nKQ0KICAgICAgICBzdGFydG1heGpvYis9MQ0KICAgICAgICBpZiBzdGFydG1heGpvYiA9PSBtYXhqb2IrMToNCiAgICAgICAgICBwcmludChmJ35bK117cGlua33EkMODIMSQ4bqgVCBNQVggSk9CLiAnKQ0KICAgICAgICAgIHJldHVybg0KICAgICAgZWxzZToNCiAgICAgICAgcHJpbnQoZid7Z3JlZW59xJBBTkcgS0nhu4JNIFRSQSBM4bqgSSBUUuG6oE5HIFRIw4FJIEpPQiAgICAgICAgJyxlbmQ9IlxyIikNCiAgICAgICAgc2xlZXAoMSkNCiAgICAgICAgZyA9IHJlcXVlc3RzLnBvc3QoDQogICAgICAgICAgJ2h0dHBzOi8vZ2F0ZXdheS5nb2xpa2UubmV0L2FwaS9hZHZlcnRpc2luZy9wdWJsaXNoZXJzL3Rpa3Rvay9jb21wbGV0ZS1qb2JzJywNCiAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsDQogICAgICAgICAganNvbj1qc29uX2RhdGEsDQogICAgICApLnRleHQNCiAgICAgICAgdHJ5Og0KICAgICAgICAgIGc9anNvbi5sb2FkcyhnKQ0KICAgICAgICBleGNlcHQgOg0KICAgICAgICAgIGJyZWFrDQogICAgICAgIGlmIGdbJ3N0YXR1cyddPT0yMDA6DQogICAgICAgICAgam9iX3N1Y2Nlc3MrPTENCiAgICAgICAgICBwcmludChmJ3tncmVlbn1KT0IgU1VDQ0VTUzp7cmVkfVt7am9iX3N1Y2Nlc3N9L3tzdGFydG1heGpvYi0xfV0ge2N5YW59W3t0aW1lKCl9XSB8IHtyYW5kb20uY2hvaWNlKHJhbm1hdSl9U1VDQ0VTUyB8IHtncmVlbn1GT0xMT1cgfCAre2dbImRhdGEiXVsicHJpY2VzIl19JykNCiAgICAgICAgICBzdGFydG1heGpvYis9MQ0KICAgICAgICAgIGlmIHN0YXJ0bWF4am9iID09IG1heGpvYisxOg0KICAgICAgICAgICAgcHJpbnQoZid+Wytde3Bpbmt9xJDDgyDEkOG6oFQgTUFYIEpPQi4gJykNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICBpZiBnWydzdGF0dXMnXSAhPTIwMDoNCiAgICAgICAgICBwcmludChmJ3tyZWR9xJBBTkcgQuG7jiBRVUEgTkhJ4buGTSBW4bukICAgICAgICAgICAgICAgICAgICcsZW5kPSdccicpDQogICAgICAgICAgaGVhZGVycyA9IHsNCiAgICAgICAgICAgICAgJ2F1dGhvcml6YXRpb24nOiBhdXRoLA0KICAgICd0JzogICAgICAgICdWRlpTV2s1Vk9VVlZWRUpRVWtaR05GUlhZemxRVVQwOScsDQogICAgJ1VzZXItQWdlbnQnOiJNb3ppbGxhLzUuMCAoaVBob25lOyBVOyBDUFUgaVBob25lIE9TIDRfM181IGxpa2UgTWFjIE9TIFg7IGVuLXVzKSBBcHBsZVdlYktpdC81MzMuMTcuOSAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNS4wLjIgTW9iaWxlLzhMMSBTYWZhcmkvNjUzMy4xOC41Ig0KfQ0KDQogICAgICAgICAganNvbl9kYXRhID0gew0KICAgICAgICAgICAgICAnZGVzY3JpcHRpb24nOiAnQsOhbyBjw6FvIGhvw6BuIHRow6BuaCB0aOG6pXQgYuG6oWknLA0KICAgICAgICAgICAgICAndXNlcnNfYWR2ZXJ0aXNpbmdfaWQnOiBpZCwNCiAgICAgICAgICAgICAgJ3R5cGUnOiAnYWRzJywNCiAgICAgICAgICAgICAgJ3Byb3ZpZGVyJzogJ3Rpa3RvaycsDQogICAgICAgICAgICAgICdmYl9pZCc6IGlkdGlrdG9rICwNCiAgICAgICAgICAgICAgJ2Vycm9yX3R5cGUnOiAzLA0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ2F0ZXdheS5nb2xpa2UubmV0L2FwaS9yZXBvcnQvc2VuZCcsIGhlYWRlcnM9aGVhZGVycywganNvbj1qc29uX2RhdGEpDQoNCg0KICAgICAgICAgIGhlYWRlcnMgPSB7DQogICAgICAgICAgICAgICdhdXRob3JpemF0aW9uJzogYXV0aCwNCiAgICAndCc6ICAgICAgICAnVkZaU1drNVZPVVZWVkVKUVVrWkdORlJYWXpsUVVUMDknLA0KICAgICdVc2VyLUFnZW50JzoiTW96aWxsYS81LjAgKGlQaG9uZTsgVTsgQ1BVIGlQaG9uZSBPUyA0XzNfNSBsaWtlIE1hYyBPUyBYOyBlbi11cykgQXBwbGVXZWJLaXQvNTMzLjE3LjkgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzUuMC4yIE1vYmlsZS84TDEgU2FmYXJpLzY1MzMuMTguNSINCn0NCg0KICAgICAgICAgIGpzb25fZGF0YSA9IHsNCiAgICAgICAgICAgICAgJ2Fkc19pZCc6IGlkLA0KICAgICAgICAgICAgICAnb2JqZWN0X2lkJzogb2JqZWN0X2lkLA0KICAgICAgICAgICAgICAnYWNjb3VudF9pZCc6IGlkdGlrdG9rICwNCiAgICAgICAgICAgICAgJ3R5cGUnOiAnZm9sbG93JywNCiAgICAgICAgICB9DQogICAgICAgICAgc2tpcGpvYj1yZXF1ZXN0cy5wb3N0KCdodHRwczovL2dhdGV3YXkuZ29saWtlLm5ldC9hcGkvYWR2ZXJ0aXNpbmcvcHVibGlzaGVycy90aWt0b2svc2tpcC1qb2JzJywNCiAgICAgICAgICAgICAgaGVhZGVycz1oZWFkZXJzLA0KICAgICAgICAgICAgICBqc29uPWpzb25fZGF0YSwNCiAgICAgICAgICApDQogICAgICAgICAgc3RhcnRtYXhqb2IrPTENCiAgICAgICAgICBpZiBzdGFydG1heGpvYiA9PSBtYXhqb2IrMToNCiAgICAgICAgICAgIHByaW50KGYnflsrXXtncmVlbn3EkMODIMSQ4bqgVCBNQVggSk9CJykNCiAgICAgICAgICAgIHJldHVybg0KDQpkZWYgZ2V0am9iX2ZvbGxvdyhtYXhqb2IsZGVsYXksYXV0aCxpZHRpa3RvayxyZWQsYmx1ZSxncmVlbix5ZWxsb3csY3lhbixtYWdlbnRhLG9yYW5nZSx4YW5obmhhdCx4ZHVvbmcscGluayk6DQogIHN0YXJ0bWF4am9iPTENCiAgam9iX3N1Y2Nlc3M9MA0KICB3aGlsZSBUcnVlIDoNCiAgICB3aGlsZSBUcnVlIDoNCiAgICAgIGhlYT17DQogICAgICAnQXV0aG9yaXphdGlvbic6ICBhdXRoLA0KICAgICd0JzogICAgICAgICdWRlpTV2s1Vk9VVlZWRUpRVWtaR05GUlhZemxRVVQwOScsDQogICAgJ1VzZXItQWdlbnQnOiJNb3ppbGxhLzUuMCAoaVBob25lOyBVOyBDUFUgaVBob25lIE9TIDRfM181IGxpa2UgTWFjIE9TIFg7IGVuLXVzKSBBcHBsZVdlYktpdC81MzMuMTcuOSAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNS4wLjIgTW9iaWxlLzhMMSBTYWZhcmkvNjUzMy4xOC41Ig0KfQ0KDQogICAgICB0cnk6DQogICAgICAgIGE9cmVxdWVzdHMuZ2V0KGYnaHR0cHM6Ly9nYXRld2F5LmdvbGlrZS5uZXQvYXBpL2FkdmVydGlzaW5nL3B1Ymxpc2hlcnMvdGlrdG9rL2pvYnM/YWNjb3VudF9pZD17aWR0aWt0b2t9JmRhdGE9bnVsbCcsaGVhZGVycz1oZWEpLmpzb24oKQ0KICAgICAgZXhjZXB0IDoNCiAgICAgICAgYnJlYWsNCiAgICAgIHRyeToNCiAgICAgICAgbGluaz1hWydkYXRhJ11bJ2xpbmsnXQ0KICAgICAgICBpZD1hWydkYXRhJ11bJ2lkJ10NCiAgICAgICAgb2JqZWN0X2lkPWFbJ2xvY2snXVsnb2JqZWN0X2lkJ10NCiAgICAgICAgaWYgJ3ZpZGVvJyBpbiBsaW5rOg0KICAgICAgICAgIHByaW50KGYie3JlZH3EkEFORyBM4buMQyBKT0IgTElLRSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIixlbmQ9J1xyJykNCiAgICAgICAgICBoZWFkZXJzID0gew0KICAgICAgICAgICAgICAnYXV0aG9yaXphdGlvbic6IGF1dGgsDQogICAgJ3QnOiAgICAgICAgJ1ZGWlNXazVWT1VWVlZFSlFVa1pHTkZSWFl6bFFVVDA5JywNCiAgICAnVXNlci1BZ2VudCc6Ik1vemlsbGEvNS4wIChpUGhvbmU7IFU7IENQVSBpUGhvbmUgT1MgNF8zXzUgbGlrZSBNYWMgT1MgWDsgZW4tdXMpIEFwcGxlV2ViS2l0LzUzMy4xNy45IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi81LjAuMiBNb2JpbGUvOEwxIFNhZmFyaS82NTMzLjE4LjUiDQp9DQoNCiAgICAgICAgICBqc29uX2RhdGEgPSB7DQogICAgJ2Rlc2NyaXB0aW9uJzogJ1TDtGkga2jDtG5nIG114buRbiBsw6BtIEpvYiBuw6B5JywNCiAgICAndXNlcnNfYWR2ZXJ0aXNpbmdfaWQnOiBpZCwNCiAgICAndHlwZSc6ICdhZHMnLA0KICAgICdwcm92aWRlcic6ICd0aWt0b2snLA0KICAgICdmYl9pZCc6IGlkdGlrdG9rLA0KICAgICdlcnJvcl90eXBlJzogMCwNCn0NCg0KICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9nYXRld2F5LmdvbGlrZS5uZXQvYXBpL3JlcG9ydC9zZW5kJywgaGVhZGVycz1oZWFkZXJzLCBqc29uPWpzb25fZGF0YSkNCg0KDQogICAgICAgICAganNvbl9kYXRhID0gew0KICAgICdhZHNfaWQnOiBpZCwNCiAgICAnb2JqZWN0X2lkJzogb2JqZWN0X2lkLA0KICAgICdhY2NvdW50X2lkJzogaWR0aWt0b2ssDQogICAgJ3R5cGUnOiAnbGlrZScsDQp9DQogICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KA0KICAgICdodHRwczovL2dhdGV3YXkuZ29saWtlLm5ldC9hcGkvYWR2ZXJ0aXNpbmcvcHVibGlzaGVycy90aWt0b2svc2tpcC1qb2JzJywNCiAgICBoZWFkZXJzPWhlYWRlcnMsDQogICAganNvbj1qc29uX2RhdGEsDQopDQogICAgICAgIGVsc2U6DQogICAgICAgICAgb3Muc3lzdGVtKGYndGVybXV4LW9wZW4tdXJsIHtsaW5rfScpDQogICAgICAgICAgZm9yIGsgaW4gcmFuZ2UoZGVsYXksLTEsLTEpOg0KICAgICAgICAgICAgbWF1PXJhbmRvbS5jaG9pY2UocmFubWF1KQ0KICAgICAgICAgICAgcHJpbnQoZid7Z3JlZW59VGjDoG5oIGPDtG5nOntyZWR9W3tqb2Jfc3VjY2Vzc30ve3N0YXJ0bWF4am9iLTF9XXtyYW5kb20uY2hvaWNlKHJhbm1hdSl9TE9BRElORyAge3JhbmRvbS5jaG9pY2UocmFubWF1KX0+PiB7eWVsbG93fU5W4bukIE3hu5pJIFNBVSB7cmFuZG9tLmNob2ljZShyYW5tYXUpfT4+IHtyYW5kb20uY2hvaWNlKHJhbm1hdSl9W3trfXNdICcsZW5kPSdccicpDQogICAgICAgICAgICBzbGVlcCgxKQ0KICAgICAgICAgIHByaW50KGYne3JlZH3EkGFuZyBraeG7g20gdHJhIHRy4bqhbmcgdGjDoWkgam9iICAgICAgICAgICAgICAgICcsZW5kPSdccicpDQogICAgICAgICAgaGVhZGVycyA9IHsNCiAgICAgICAgICAgICAgJ2F1dGhvcml6YXRpb24nOiBhdXRoLA0KICAgICAgICAndCc6ICAgICdWRlpTV2s1Vk9VVlZWRUpRVWtaR05GUlhZemxRVVQwOScsDQogICAgICAgICdVc2VyLUFnZW50JzoiTW96aWxsYS81LjAgKGlQaG9uZTsgVTsgQ1BVIGlQaG9uZSBPUyA0XzNfNSBsaWtlIE1hYyBPUyBYOyBlbi11cykgQXBwbGVXZWJLaXQvNTMzLjE3LjkgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzUuMC4yIE1vYmlsZS84TDEgU2FmYXJpLzY1MzMuMTguNSINCiAgICB9DQoNCiAgICAgICAgICBqc29uX2RhdGEgPSB7DQogICAgICAgICAgICAgICdhZHNfaWQnOiBpZCwNCiAgICAgICAgICAgICAgJ2FjY291bnRfaWQnOiBpZHRpa3RvayAsDQogICAgICAgICAgICAgICdhc3luYyc6IFRydWUsDQogICAgICAgICAgICAgICdkYXRhJzogTm9uZSwNCiAgICAgICAgICB9DQogICAgICAgICAgdHJ5Og0KDQogICAgICAgICAgICBnID1yZXF1ZXN0cy5wb3N0KA0KICAgICAgICAgICAgJ2h0dHBzOi8vZ2F0ZXdheS5nb2xpa2UubmV0L2FwaS9hZHZlcnRpc2luZy9wdWJsaXNoZXJzL3Rpa3Rvay9jb21wbGV0ZS1qb2JzJyxoZWFkZXJzPWhlYWRlcnMsanNvbj1qc29uX2RhdGEpLmpzb24oKQ0KICAgICAgICAgICAgaWYgZ1snc3RhdHVzJ109PTIwMDoNCiAgICAgICAgICAgICAgam9iX3N1Y2Nlc3MrPTENCiAgICAgICAgICAgICAgcHJpbnQoZid7Z3JlZW59Sk9CIFNVQ0NFU1M6e3JlZH1be2pvYl9zdWNjZXNzfS97c3RhcnRtYXhqb2ItMX1dIHtjeWFufVt7dGltZSgpfV0gfCB7cmFuZG9tLmNob2ljZShyYW5tYXUpfVNVQ0NFU1MgfCB7Z3JlZW59Rk9MTE9XIHwgK3tnWyJkYXRhIl1bInByaWNlcyJdfScpDQogICAgICAgICAgICAgIHN0YXJ0bWF4am9iKz0xDQogICAgICAgICAgICAgIGlmIHN0YXJ0bWF4am9iID09IG1heGpvYisxOg0KICAgICAgICAgICAgICAgIHByaW50KGYnflsrXXtwaW5rfcSQw4MgxJDhuqBUIE1BWCBKT0IuICcpDQogICAgICAgICAgICAgICAgcmV0dXJuDQoNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgIHByaW50KGYne2dyZWVufcSQQU5HIEtJ4buCTSBUUkEgTOG6oEkgVFLhuqBORyBUSMOBSSBKT0IgICAgICAgICAgICAgICAgICAgICAnLGVuZD0iXHIiKQ0KICAgICAgICAgICAgICBzbGVlcCgxKQ0KDQogICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBnID0gcmVxdWVzdHMucG9zdCgNCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly9nYXRld2F5LmdvbGlrZS5uZXQvYXBpL2FkdmVydGlzaW5nL3B1Ymxpc2hlcnMvdGlrdG9rL2NvbXBsZXRlLWpvYnMnLA0KICAgICAgICAgICAgICAgIGhlYWRlcnM9aGVhZGVycywNCiAgICAgICAgICAgICAgICBqc29uPWpzb25fZGF0YSwNCiAgICAgICAgICAgICkuanNvbigpDQogICAgICAgICAgICAgICAgaWYgZ1snc3RhdHVzJ109PTIwMDoNCiAgICAgICAgICAgICAgICAgIGpvYl9zdWNjZXNzKz0xDQogICAgICAgICAgICAgICAgICBwcmludChmJ3tncmVlbn1KT0IgU1VDQ0VTUzp7cmVkfVt7am9iX3N1Y2Nlc3N9L3tzdGFydG1heGpvYi0xfV0ge2N5YW59W3t0aW1lKCl9XSB8IHtyYW5kb20uY2hvaWNlKHJhbm1hdSl9U1VDQ0VTUyB8IHtncmVlbn1GT0xMT1cgfCAre2dbImRhdGEiXVsicHJpY2VzIl19JykNCiAgICAgICAgICAgICAgICAgIHN0YXJ0bWF4am9iKz0xDQogICAgICAgICAgICAgICAgICBpZiBzdGFydG1heGpvYiA9PSBtYXhqb2IrMToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZid+Wytde3Bpbmt9xJDDgyDEkOG6oFQgTUFYIEpPQi4gJykNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgIHByaW50KGYne3JlZH3EkEFORyBC4buOIFFVQSBOSEnhu4ZNIFbhu6QgICAgICAgICAgICAgICAgICAgJyxlbmQ9J1xyJykNCiAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSB7DQogICAgICAgICAgICAgICAgICAgICAgJ2F1dGhvcml6YXRpb24nOiBhdXRoLA0KICAgICAgICAgICAgJ3QnOiAgICAgICAgJ1ZGWlNXazVWT1VWVlZFSlFVa1pHTkZSWFl6bFFVVDA5JywNCiAgICAgICAgICAgICdVc2VyLUFnZW50JzoiTW96aWxsYS81LjAgKGlQaG9uZTsgVTsgQ1BVIGlQaG9uZSBPUyA0XzNfNSBsaWtlIE1hYyBPUyBYOyBlbi11cykgQXBwbGVXZWJLaXQvNTMzLjE3LjkgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzUuMC4yIE1vYmlsZS84TDEgU2FmYXJpLzY1MzMuMTguNSINCiAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICBqc29uX2RhdGEgPSB7DQogICAgICAgICAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogJ0LDoW8gY8OhbyBob8OgbiB0aMOgbmggdGjhuqV0IGLhuqFpJywNCiAgICAgICAgICAgICAgICAgICAgICAndXNlcnNfYWR2ZXJ0aXNpbmdfaWQnOiBpZCwNCiAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdhZHMnLA0KICAgICAgICAgICAgICAgICAgICAgICdwcm92aWRlcic6ICd0aWt0b2snLA0KICAgICAgICAgICAgICAgICAgICAgICdmYl9pZCc6IGlkdGlrdG9rICwNCiAgICAgICAgICAgICAgICAgICAgICAnZXJyb3JfdHlwZSc6IDMsDQogICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ2F0ZXdheS5nb2xpa2UubmV0L2FwaS9yZXBvcnQvc2VuZCcsIGhlYWRlcnM9aGVhZGVycywganNvbj1qc29uX2RhdGEpDQoNCg0KICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAnYXV0aG9yaXphdGlvbic6IGF1dGgsDQogICAgICAgICAgICAndCc6ICAgICAgICAnVkZaU1drNVZPVVZWVkVKUVVrWkdORlJYWXpsUVVUMDknLA0KICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiJNb3ppbGxhLzUuMCAoaVBob25lOyBVOyBDUFUgaVBob25lIE9TIDRfM181IGxpa2UgTWFjIE9TIFg7IGVuLXVzKSBBcHBsZVdlYktpdC81MzMuMTcuOSAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNS4wLjIgTW9iaWxlLzhMMSBTYWZhcmkvNjUzMy4xOC41Ig0KICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIGpzb25fZGF0YSA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAnYWRzX2lkJzogaWQsDQogICAgICAgICAgICAgICAgICAgICAgJ29iamVjdF9pZCc6IG9iamVjdF9pZCwNCiAgICAgICAgICAgICAgICAgICAgICAnYWNjb3VudF9pZCc6IGlkdGlrdG9rICwNCiAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdmb2xsb3cnLA0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgc2tpcGpvYj1yZXF1ZXN0cy5wb3N0KCdodHRwczovL2dhdGV3YXkuZ29saWtlLm5ldC9hcGkvYWR2ZXJ0aXNpbmcvcHVibGlzaGVycy90aWt0b2svc2tpcC1qb2JzJywNCiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsDQogICAgICAgICAgICAgICAgICAgICAganNvbj1qc29uX2RhdGEsDQogICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICBzdGFydG1heGpvYis9MQ0KICAgICAgICAgICAgICAgICAgaWYgc3RhcnRtYXhqb2IgPT0gbWF4am9iKzE6DQogICAgICAgICAgICAgICAgICAgIHByaW50KGYnflsrXXtncmVlbn3EkMODIMSQ4bqgVCBNQVggSk9CJykNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICAgIGV4Y2VwdCA6DQogICAgICAgICAgICAgICAgcHJpbnQoJ8SQYW5nIHRo4butIGzhuqFpLi4uLi4uJykNCiAgICAgICAgICAgICAgICBzbGVlcCgxKQ0KICAgICAgICAgIGV4Y2VwdCA6DQogICAgICAgICAgICBicmVhaw0KICAgICAgZXhjZXB0Og0KICAgICAgICAgYnJlYWsNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQpkZWYgY3JlYXRfa2V5KCk6DQogIGN1cnJlbnRfdGltZSA9IGRhdGV0aW1lLm5vdygpDQogIHRpbWUgPSBjdXJyZW50X3RpbWUuc3RyZnRpbWUoIiVGIikNCiAgY2hhcmFjdGVyc190b19jaG9vc2VfZnJvbSA9ICdxxrBlcnR5dWlvcGFzZGdoamtsenhjdmJubVFXRVJUWVVJT1BBU0RHSEpLTFpYQ1ZCTk0xMjM0NTY3ODknDQogIGNoYXJhY3RlcnMgPSAnccawZXJ0eXVpb3Bhc2RnaGprbHp4Y3Zibm1RV0VSVFlVSU9QQVNER0hKS0xaWENWQk5NMTIzNDU2Nzg5Jw0KICAgICMgVOG6oW8gbeG7mXQgY2h14buXaSBuZ+G6q3Ugbmhpw6puIGfhu5NtIDUwMDAga8O9IHThu7EgdOG7qyBkYW5oIHPDoWNoIHRyw6puDQogIHJhbmRvbWEgPSAnJy5qb2luKHJhbmRvbS5jaG9pY2UoY2hhcmFjdGVyc190b19jaG9vc2VfZnJvbSkgZm9yIF8gaW4gcmFuZ2UoMTApKQ0KICBlbmRfbGluayA9ICcnLmpvaW4ocmFuZG9tLmNob2ljZShjaGFyYWN0ZXJzKSBmb3IgXyBpbiByYW5nZSgxMCkpDQogIGR1bGlldT1mJ0tleS17dGltZX0te3JhbmRvbWF9Jw0KICBub3RlPSBmJ2h0dHBzOi8vbGF5bGlua25nb24uMDAwd2ViaG9zdGFwcC5jb20vP3RleHQ9e2R1bGlldX0nDQogIHNob3J0bGluaz1yZXF1ZXN0cy5nZXQoZiJodHRwczovL3dlYjFzLmNvbS9hcGk/dG9rZW49NzU0MTcxMzQtNjkxNC00OGE3LWEzMDAtMzZiMzY4ZGU1YjQ2JnVybD17bm90ZX0iKS5qc29uKCkNCiAgc2hvcnRsaW5rPXNob3J0bGlua1snc2hvcnRlbmVkVXJsJ10NCiAgcmV0dXJuIHNob3J0bGluayxkdWxpZXUNCg0KDQoNCg0KDQojYmnhur9uDQojZ3JlZW49J1wwMzNbMzg7NTsxMG0nDQpibHVlPSdcMDMzWzM4OzU7MTJtJw0KY3lhbj0nXDAzM1szODs1OzE0bScNCndoaXRlPSdcMDMzWzE7MzltJw0KbWFnZW50YT0nXDAzM1szODs1OzVtJw0Kb3JhbmdlPSdcMDMzWzM4OzU7MjAybScNCnhhbmhuaGF0ID0gIlwwMzNbMTszNm0iDQpyZWQgPSAiXDAzM1sxOzMxbSINCmdyZWVuID0gIlwwMzNbMTszMm0iDQp5ZWxsb3cgPSAiXDAzM1sxOzMzbSINCnhkdW9uZyA9ICJcMDMzWzE7MzRtIg0KcGluayA9ICJcMDMzWzE7MzVtIg0KdHJhbmcgPSAiXDAzM1sxOzM5bSINCndoaXRlYj0iXDAzM1sxOzM5bSINCnJlZGI9IlwwMzNbMTszMW0iDQplbmQ9J1wwMzNbMG0nDQpyYW5tYXU9KHJlZCxibHVlLGdyZWVuLHllbGxvdyxjeWFuLG1hZ2VudGEsb3JhbmdlLHhhbmhuaGF0LHhkdW9uZyxwaW5rKQ0KDQoNCg0KZGVmIHRpbmhuZ2F5KHNvbmdheSk6DQogICAgdGltZSA9IGRhdGV0aW1lLm5vdygpDQogICAgc3RhcnQ9dGltZS5zdHJmdGltZSgiJWQvJW0vJVkiKQ0KICAgIGVuZCA9ICh0aW1lICsgdGltZWRlbHRhKGRheXM9aW50KHNvbmdheSkpKS5zdHJmdGltZSgiJWQvJW0vJVkiKQ0KICAgIHJldHVybiBzdGFydCwgZW5kDQoNCg0KDQoNCmRlZiBhY3RpdmVmaWxlKHN0YXJ0LGVuZCk6DQoNCiAgaWYgbm90IG9zLnBhdGguZXhpc3RzKCJ2aXBrZXkudHh0Iik6DQogICBkYXRhPXsNCiAgICAgICAic3RhcnQiOnN0YXJ0LA0KICAgICAgICJlbmQiOmVuZA0KICAgfQ0KICAgd2l0aCBvcGVuKCJ2aXBrZXkudHh0IiwgInciKSBhcyBzdGF0ZV9maWxlOg0KICAgICAgICAgICAgICAgICAgc3RhdGVfZmlsZS53cml0ZShqc29uLmR1bXBzKGRhdGEpKQ0KDQogIGVsc2U6DQogICAgICAgIHdpdGggb3Blbigndmlwa2V5LnR4dCcsICdyJykgYXMgZmlsZToNCiAgICAgICAgICAgIGRhdGFfdHh0ID0gZmlsZS5yZWFkKCkNCg0KICAgICAgICAjIFBow6JuIHTDrWNoIGThu68gbGnhu4d1IEpTT04NCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZGF0YV9qc29uID0ganNvbi5sb2FkcyhkYXRhX3R4dCkNCiAgICAgICAgICAgIHN0YXJ0X2RhdGUgPSBkYXRhX2pzb24uZ2V0KCdzdGFydCcpDQogICAgICAgICAgICBlbmRfZGF0ZSA9IGRhdGFfanNvbi5nZXQoJ2VuZCcpDQogICAgICAgICAgICByZXR1cm4gc3RhcnRfZGF0ZSxlbmRfZGF0ZQ0KICAgICAgICBleGNlcHQganNvbi5KU09ORGVjb2RlRXJyb3I6DQogICAgICAgICAgICBwcmludCgiROG7ryBsaeG7h3Uga2jDtG5nIGjhu6NwIGzhu4cuIFZ1aSBsw7JuZyBraeG7g20gdHJhIGzhuqFpIMSR4buLbmggZOG6oW5nIEpTT04gdHJvbmcgdOG7h3AuIikNCg0KIyBUaW5oIG5nYXkgdmEgbGF5IGxhDQpkZWYgZ2hpY2h1KCk6DQoNCiAgICAjIFPhu60gZOG7pW5nIHRoxrAgdmnhu4duIHJlcXVlc3RzIMSR4buDIHThuqNpIHRyYW5nIHdlYg0KICAgIHJlc3BvbnNlMSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9naGljaHUudm4vc2hhcmUvYTJkNjAzZWRjJykNCg0KICAgICMgS2nhu4NtIHRyYSB4ZW0gdOG6o2kgdHJhbmcgdGjDoG5oIGPDtG5nIGhheSBraMO0bmcgKEhUVFAgc3RhdHVzIGNvZGUgMjAwIGzDoCB0aMOgbmggY8O0bmcpDQogICAgaWYgcmVzcG9uc2UxLnN0YXR1c19jb2RlID09IDIwMDoNCiAgICAgICAgIyBQYXJzZSBu4buZaSBkdW5nIEhUTUwgYuG6sW5nIEJlYXV0aWZ1bFNvdXANCiAgICAgICAgc291cDEgPSBCZWF1dGlmdWxTb3VwKHJlc3BvbnNlMS50ZXh0LCAnaHRtbC5wYXJzZXInKQ0KDQogICAgICAgICMgVMOsbSB0aOG6uyA8dGV4dGFyZWE+IGLhurFuZyBjbGFzcyAnY29udGVudCcNCiAgICAgICAgdGV4dGFyZWEgPSBzb3VwMS5maW5kKCd0ZXh0YXJlYScsIHsnY2xhc3MnOiAnY29udGVudCd9KQ0KDQogICAgICAgICMgTOG6pXkgbuG7mWkgZHVuZyBiw6puIHRyb25nIHRo4bq7IDx0ZXh0YXJlYT4NCiAgICAgICAgaWYgdGV4dGFyZWE6DQogICAgICAgICAgICBkYXRhX2RldmljZXMgPSB0ZXh0YXJlYS5zdHJpbmcuc3RyaXAoKQ0KICAgICAgICAgICAgcmV0dXJuIGRhdGFfZGV2aWNlcw0KICAgIGVsc2U6DQogICAgICAgIHByaW50KGYne3JlZH1LSeG7gk0gVFJBIEtFWSBD4bumQSBC4bqgTicpDQoNCmRlZiBuZ2F5KGNodW9pKToNCg0KDQogICAgIyBUw6xtIHbhu4sgdHLDrSBj4bunYSAidmlwa2V5LSIgdHJvbmcgY2h14buXaQ0KICAgIHZpX3RyaV92aXBrZXkgPSBjaHVvaS5maW5kKCJWaXBrZXktIikNCg0KICAgIGlmIHZpX3RyaV92aXBrZXkgIT0gLTE6DQogICAgICAgICMgQ+G6r3QgY2h14buXaSB04burIHbhu4sgdHLDrSBzYXUgInZpcGtleS0iDQogICAgICAgIHNvX3NhdV92aXBrZXkgPSBjaHVvaVt2aV90cmlfdmlwa2V5ICsgbGVuKCJWaXBrZXktIik6XQ0KDQogICAgICAgICMgVMOsbSB24buLIHRyw60gY+G7p2EgIi0iIHRyb25nIGNodeG7l2kgY+G6r3QgxJHGsOG7o2MNCiAgICAgICAgdmlfdHJpX2dhY2hfbmdhbmcgPSBzb19zYXVfdmlwa2V5LmZpbmQoIi0iKQ0KDQogICAgICAgIGlmIHZpX3RyaV9nYWNoX25nYW5nICE9IC0xOg0KICAgICAgICAgICAgIyBM4bqleSBz4buRIHThu6sgY2h14buXaSBj4bqvdCDEkcaw4bujYw0KICAgICAgICAgICAgc28gPSBzb19zYXVfdmlwa2V5Wzp2aV90cmlfZ2FjaF9uZ2FuZ10NCiAgICAgICAgICAgIHJldHVybiBzbw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcHJpbnQoIktow7RuZyB0w6xtIHRo4bqleSBrw70gdOG7sSAnLScgc2F1ICd2aXBrZXktJyIpDQogICAgZWxzZToNCiAgICAgICAgcHJpbnQoIktow7RuZyB0w6xtIHRo4bqleSBjaHXhu5dpICd2aXBrZXktJyB0cm9uZyBjaHXhu5dpIikNCg0KZGVmIGlucHV0X3ZpcGtleShrZXkscmVkLGJsdWUsZ3JlZW4seWVsbG93LGN5YW4sbWFnZW50YSxvcmFuZ2UseGFuaG5oYXQseGR1b25nLHBpbmspOg0KDQogICAgICAgIGRhdGFfZGV2aWNlcz1naGljaHUoKQ0KICAgICAgICAgICMgU+G7rSBk4bulbmcgLnN0cmluZyDEkeG7gyBs4bqleSBu4buZaSBkdW5nIHbDoCAuc3RyaXAoKSDEkeG7gyBsb+G6oWkgYuG7jyBraG/huqNuZyB0cuG6r25nIHRo4burYQ0KICAgICAgICBpZiBrZXkgaW4gZGF0YV9kZXZpY2VzIDoNCiAgICAgICAgICAgc3RhcnQsZW5kPXRpbmhuZ2F5KG5nYXkoa2V5KSkNCiAgICAgICAgICAgYWN0aXZlZmlsZShzdGFydCxlbmQpDQogICAgICAgICAgIGRldmljZV9pbmZvPXsNCiAgICAgICAgJ3N5c3RlbSc6cGxhdGZvcm0uc3lzdGVtKCksDQogICAgICAgICduYW1lJzpwbGF0Zm9ybS5ub2RlKCksDQogICAgICAgICJyZWxlYXNlIjpwbGF0Zm9ybS5yZWxlYXNlKCksDQogICAgICAgICJtYWNoaW5lIjpwbGF0Zm9ybS5tYWNoaW5lKCksDQogICAgICAgICJwcm9jZXNzb3IiOnBsYXRmb3JtLnByb2Nlc3NvcigpICwNCiAgICAgICAgInRpbWUiOnsNCiAgICAgICAgICAgICJzdGFydCI6c3RhcnQsDQogICAgICAgICAgICAiZW5kIjplbmQNCg0KICAgICAgICB9DQogICAgfQ0KICAgICAgICAgICBoZWFkZXJzID0gew0KICAgICAgICAgICAgJ2Nvb2tpZSc6ICdQSFBTRVNTSUQ9ZWNiMzg0M2JmYWM1ZWMyYzdiYTFlZTRlZDY1YWJjMjInLA0KDQogICAgICAgIH0NCg0KICAgICAgICAgICBkYXRhID0gew0KICAgICAgICAgICAgJ3QnOiBkYXRhX2RldmljZXMucmVwbGFjZShrZXksJycpKyJcbiIrc3RyKGRldmljZV9pbmZvKSwNCiAgICAgICAgfQ0KDQogICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9naGljaHUudm4vNzluZzUnLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkNCiAgICAgICAgICAgcHJpbnQoZid7Z3JlZW59VGjDoG5oIGPDtG5nIC5LZXkgdmlwIGPhu6dhIGLhuqFuIGPDsyB0aOG7nWkgaOG6oW4gxJHhur9uIHtjeWFufXtlbmR9JykNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgcHJpbnQoZid7cmVkfUtp4buDbSB0cmEga2V5IGPhu6dhIGLhuqFuJykNCiAgICAgICAgICAgc2xlZXAoOTk5OTk5OTk5OTk5OSkNCg0KDQoNCg0KZGVmIGNoZWNrX2tleXZpcCgpOg0KICAgc3RhcnQsZW5kPWFjdGl2ZWZpbGUoJ2EnLCdiJykNCiAgIGlmIGRhdGV0aW1lLm5vdygpLmRhdGUoKSA+IGRhdGV0aW1lLnN0cnB0aW1lKGVuZCwgIiVkLyVtLyVZIikuZGF0ZSgpOg0KICAgIHByaW50KGYie3JlZH1WaXAga2V5IMSRw6MgaOG6v3QgaOG6oW4iKQ0KICAgIHByaW50KGYne3JlZH1Iw6N5IGto4bufaSDEkeG7mW5nIGzhuqFpIHRvb2wgxJHhu4MgbOG6pXkga2V5IGZyZWUgaG/hurdjIGtleSB2aXAgbeG7m2knKQ0KICAgIGhlYWRlcnMgPSB7DQogICAgJ2Nvb2tpZSc6ICdQSFBTRVNTSUQ9ZWNiMzg0M2JmYWM1ZWMyYzdiYTFlZTRlZDY1YWJjMjInLA0KDQp9DQogICAgZGV2aWNlX2luZm9fZGljdD17DQogICAgICAgICAgICAnc3lzdGVtJzpwbGF0Zm9ybS5zeXN0ZW0oKSwNCiAgICAgICAgICAgICduYW1lJzpwbGF0Zm9ybS5ub2RlKCksDQogICAgICAgICAgICAicmVsZWFzZSI6cGxhdGZvcm0ucmVsZWFzZSgpLA0KICAgICAgICAgICAgIm1hY2hpbmUiOnBsYXRmb3JtLm1hY2hpbmUoKSwNCiAgICAgICAgICAgICJwcm9jZXNzb3IiOnBsYXRmb3JtLnByb2Nlc3NvcigpICwNCiAgICAgICAgICAgICJ0aW1lIjp7DQogICAgICAgICAgICAgICAgInN0YXJ0IjpzdGFydCwNCiAgICAgICAgICAgICAgICAiZW5kIjplbmQNCg0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgZGF0YSA9IHsNCiAgICAndCc6IGdoaWNodSgpLnJlcGxhY2Uoc3RyKGRldmljZV9pbmZvX2RpY3QpLCcnKSwNCn0NCg0KICAgIHJlc3BvbnNlID0gcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9naGljaHUudm4vNzluZzUnLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkNCiAgICBvcy5yZW1vdmUoJ3ZpcGtleS50eHQnKQ0KICAgIHJldHVybiBGYWxzZQ0KICAgZWxzZToNCiAgICBkZXZpY2VfaW5mb19kaWN0PXsNCiAgICAgICAgICAgICdzeXN0ZW0nOnBsYXRmb3JtLnN5c3RlbSgpLA0KICAgICAgICAgICAgJ25hbWUnOnBsYXRmb3JtLm5vZGUoKSwNCiAgICAgICAgICAgICJyZWxlYXNlIjpwbGF0Zm9ybS5yZWxlYXNlKCksDQogICAgICAgICAgICAibWFjaGluZSI6cGxhdGZvcm0ubWFjaGluZSgpLA0KICAgICAgICAgICAgInByb2Nlc3NvciI6cGxhdGZvcm0ucHJvY2Vzc29yKCkgLA0KICAgICAgICAgICAgInRpbWUiOnsNCiAgICAgICAgICAgICAgICAic3RhcnQiOnN0YXJ0LA0KICAgICAgICAgICAgICAgICJlbmQiOmVuZA0KDQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgIGRldmljZXNfaW5mbz1naGljaHUoKQ0KICAgIGlmIHN0cihkZXZpY2VfaW5mb19kaWN0KSBub3QgaW4gZGV2aWNlc19pbmZvOg0KICAgICAgICBwcmludChmIntyZWR9VGhp4bq/dCBi4buLIGPhu6dhIGLhuqFuIGtow7RuZyBu4bqxbSB0cm9uZyBkYW5oIHPDoWNoIHZpcCBrZXkiKQ0KICAgICAgICBwcmludChmJ3tyZWR9SMOjeSBraOG7n2kgxJHhu5luZyBs4bqhaSB0b29sIMSR4buDIG5o4bqtcCBrZXkgZnJlZSBob+G6t2Mga2V5IHZpcCBt4bubaScpDQogICAgICAgIG9zLnJlbW92ZSgidmlwa2V5LnR4dCIpDQogICAgICAgIHJldHVybiBGYWxzZQ0KICAgIGVsc2U6DQogICAgICAgY29ubGFpPShkYXRldGltZS5zdHJwdGltZShlbmQsICIlZC8lbS8lWSIpLmRhdGUoKSAtIGRhdGV0aW1lLm5vdygpLmRhdGUoKSkuZGF5cw0KICAgICAgIHByaW50KGYne2dyZWVufULhuqFuIGPDsm4ge2N5YW59e2NvbmxhaX17Z3JlZW59IG5nw6B5IMSR4buDIHPhu60gZOG7pW5nIGtleSB2aXAnKQ0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KYmFubmVyKHJlZCxncmVlbixibHVlLHllbGxvdyxjeWFuLHBpbmspDQogIA0KDQoNCg0KDQoNCg0KDQpwcmludChmJ3twaW5rfVZFUlNJT04gUFJPJykNCmNoYW5nZXRva2VuKHJlZCxncmVlbix3aGl0ZSkNCmF1dGgsY2hlY2sgPWNoZWNrYXV0aChyZWQsYmx1ZSxncmVlbix5ZWxsb3csY3lhbixtYWdlbnRhLG9yYW5nZSx4YW5obmhhdCx4ZHVvbmcscGluaykNCndoaWxlIFRydWU6DQogICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMoInNldHRpbmdfZ29saWtlLnR4dCIpOg0KICAgICAgICBpZHRpa3RvayA9Z2V0X2lkX2Zyb21fbmlja25hbWVfbnVtYmVyKHJhbm1hdSxjaGVjayxyZWQsYmx1ZSxncmVlbix5ZWxsb3csY3lhbixtYWdlbnRhLG9yYW5nZSx4YW5obmhhdCx4ZHVvbmcscGluaykNCiAgICAgICAgcHJpbnQoZicnJ35bK117cmVkfULhuqBOIEPDkyBNVeG7kE4gTOG7jEMgSk9CIExJS0UgS0jDlE5HOg0Ke3JlZH1bMV06e2dyZWVufUPDkw0Ke3JlZH1bMl06e2dyZWVufUtIw5RORycnJykNCiAgICAgICAgc2VsZWN0X2pvYj1jaW50KGYne3JlZH1OSOG6rFAgTOG7sEEgQ0jhu4xOOntncmVlbn0nKQ0KICAgICAgICBkZWxheSA9Y2ludChmJ35bK117cmVkfU5I4bqsUCBERUxBWToge2dyZWVufScpDQogICAgICAgIG1heGpvYj0gY2ludChmJ35bK117cmVkfU5I4bqsUCBNQVggSk9COiB7Z3JlZW59JykNCiAgICAgICAgc2V0dGluZz17DQogICAgICAgICAgImxvYWlqb2IiOnNlbGVjdF9qb2IsDQogICAgICAgICAgImRlbGF5IjpkZWxheSwNCiAgICAgICAgICAibWF4am9iIjptYXhqb2INCiAgICAgICAgfQ0KICAgICAgICB3aXRoIG9wZW4oInNldHRpbmdfZ29saWtlLnR4dCIsICJ3IikgYXMgZmlsZToNCiAgICAjIEdoaSBk4buvIGxp4buHdSB2w6BvIHThu4dwIHRpbg0KICAgICAgICAgICAgICBmaWxlLndyaXRlKGpzb24uZHVtcHMoc2V0dGluZykpDQogICAgICAgIHByaW50KGYne2N5YW59S0jhu55JIENI4bqgWSBOSEnhu4ZNIFbhu6QnLGVuZD0nXHInKQ0KICAgICAgICBwcmludCgn4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBJykNCiAgICAgICAgc2xlZXAoMSkNCiAgICAgICAgaWYgc2VsZWN0X2pvYj09MToNCiAgICAgICAgICBnZXRqb2JfZm9sbG93KG1heGpvYixkZWxheSxhdXRoLGlkdGlrdG9rLHJlZCxibHVlLGdyZWVuLHllbGxvdyxjeWFuLG1hZ2VudGEsb3JhbmdlLHhhbmhuaGF0LHhkdW9uZyxwaW5rKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgIGdldGpvYihtYXhqb2IsZGVsYXksYXV0aCxpZHRpa3RvayxyZWQsYmx1ZSxncmVlbix5ZWxsb3csY3lhbixtYWdlbnRhLG9yYW5nZSx4YW5obmhhdCx4ZHVvbmcscGluaykNCiAgICAgIGVsc2U6DQogICAgICAgICAgaWR0aWt0b2sgPWdldF9pZF9mcm9tX25pY2tuYW1lX251bWJlcihyYW5tYXUsY2hlY2sscmVkLGJsdWUsZ3JlZW4seWVsbG93LGN5YW4sbWFnZW50YSxvcmFuZ2UseGFuaG5oYXQseGR1b25nLHBpbmspDQogICAgICAgICAgc2VsZWN0X3NldHRpbmc9aW5wdXQoZid7Z3JlZW59QuG6oW4gY8OzIG114buRbiBz4butIGThu6VuZyBzZXR0aW5nIGPFqSBraMO0bmc/W3kvbl17Y3lhbn06JyApDQogICAgICAgICAgaWYgc2VsZWN0X3NldHRpbmcgPT0gJ24nOg0KICAgICAgICAgICAgIG9zLnJlbW92ZSgnc2V0dGluZ19nb2xpa2UudHh0JykNCiAgICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgICAgICBicmVhaw0KDQogICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICB3aXRoIG9wZW4oInNldHRpbmdfZ29saWtlLnR4dCIsICJyIikgYXMgZmlsZToNCiAgICAgICAgICAgICAgICBkYXRhX3R4dD1maWxlLnJlYWQoKQ0KICAgICAgICAgICAgICAgIGRhdGFfanNvbiA9IGpzb24ubG9hZHMoZGF0YV90eHQpDQogICAgICAgICAgICAgIHNlbGVjdF9qb2IgPSBpbnQoZGF0YV9qc29uLmdldCgnbG9haWpvYicpKQ0KICAgICAgICAgICAgICBkZWxheSA9IGludChkYXRhX2pzb24uZ2V0KCdkZWxheScpKQ0KICAgICAgICAgICAgICBtYXhqb2I9IGludChkYXRhX2pzb24uZ2V0KCdtYXhqb2InKSkNCiAgICAgICAgICAgICAgcHJpbnQoZid7Y3lhbn1LSOG7nkkgQ0jhuqBZIE5ISeG7hk0gVuG7pCcsZW5kPSdccicpDQogICAgICAgICAgICAgIHByaW50KCfilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEnKQ0KICAgICAgICAgICAgICBzbGVlcCgxKQ0KICAgICAgICAgICAgICBpZiBzZWxlY3Rfam9iPT0xOg0KICAgICAgICAgICAgICAgIGdldGpvYl9mb2xsb3cobWF4am9iLGRlbGF5LGF1dGgsaWR0aWt0b2sscmVkLGJsdWUsZ3JlZW4seWVsbG93LGN5YW4sbWFnZW50YSxvcmFuZ2UseGFuaG5oYXQseGR1b25nLHBpbmspDQogICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgZ2V0am9iKG1heGpvYixkZWxheSxhdXRoLGlkdGlrdG9rLHJlZCxibHVlLGdyZWVuLHllbGxvdyxjeWFuLG1hZ2VudGEsb3JhbmdlLHhhbmhuaGF0LHhkdW9uZyxwaW5rKQ0KICAgICAgICAgIGV4Y2VwdCBqc29uLkpTT05EZWNvZGVFcnJvcjoNCiAgICAgICAgICAgICAgcHJpbnQoIkThu68gbGnhu4d1IGtow7RuZyBo4bujcCBs4buHLiBWdWkgbMOybmcga2nhu4NtIHRyYSBs4bqhaSDEkeG7i25oIGThuqFuZyBKU09OIHRyb25nIHThu4dwLiIpDQoNCg=="
import base64
exec(base64.b64decode(enc))
